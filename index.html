<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Babylon Redux | Digital Experiments with Borges' Infinite Library</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header class="header">
        <nav class="nav">
            <button class="dropdown-toggle" aria-haspopup="true" aria-expanded="false">
                Menu
            </button>
            <ul class="nav-links" role="menu" id="navMenu">
                <li><a href="index.html" class="nav-link" role="menuitem">Home</a></li>
                <li><a href="ring.html" class="nav-link" role="menuitem">Mood Ring</a></li>
                <li><a href="passage.html" class="nav-link" role="menuitem">Tower Fragments</a></li>
                <li><a href="signal.html" class="nav-link" role="menuitem">Star Signal</a></li>
                <li><a href="loop.html" class="nav-link" role="menuitem">Index Loop</a></li>
            </ul>
        </nav>
    </header>

    <main class="container">
        <section class="hero fade-in">
            <h1 class="title">Babylon Redux</h1>
            <p class="subtitle">Experiments in Digital Oulipo</p>
        </section>

        <p id="dynamicText" class="dynamicÍ-text"></p>

        <section class="manifesto fade-in">
            <p>Grounded in methods of prompt engineering, <strong>Babylon Redux</strong> reimagines Jorge Luis Borges’ <em>The Library of Babel</em> as a series of interactive webtext experiments. Each project employs a combination of literary and computational constraints to remix and reconfigure Borges' passages into new digital forms. </br></br>Drawing from the playful rigor of OULIPO and Johanna Drucker’s work on stochastic poetics, Babylon Redux demonstrates how computational methods and literary frameworks can intersect to make creative writing more interactive, engaging, and adaptable to digital environments.</p>        </section>

        <div class="grid">
            <article class="card fade-in">
                <h3 class="card-title"><a href="ring.html">Babylon Mood Ring</a></h3>
                <p>Mood ring that selects and restyles lines of verse based on cursor position looping over random nonlinear versions of a decade-old personal poem.</p>
            </article>

            <article class="card fade-in">
                <h3 class="card-title"><a href="passage.html">Tower Fragments</a></h3>
                <p>Select passages from <em>The Library of Babel</em>, classified as either philosophical, literary, or descriptive filtered through a weighted probability distribution.</p>
            </article>

            <article class="card fade-in">
                <h3 class="card-title"><a href="index.html">Infinite Index</a></h3>
                <p>26-word index of Borgesian terms and concepts interspersed with synthetic AI-generated neologisms that scramble alphabetically with cursor movement.</p>
            </article>

            <article class="card fade-in">
                <h3 class="card-title"><a href="signal.html">Star Cipher</a></h3>
                <p>Morse code blinking signals from <em>The Library of Babel</em> in a Fibonacci spiral set against the distant starlight of the Hubble Telescope.</p>
            </article>
        </div>
    </main>

    <script>
        // Dropdown menu functionality
        const dropdownToggle = document.querySelector('.dropdown-toggle');
        const navLinks = document.querySelector('.nav-links');
        let isDropdownOpen = false;

        // Function to close dropdown
        function closeDropdown() {
            navLinks.classList.remove('active');
            dropdownToggle.classList.remove('active');
            dropdownToggle.setAttribute('aria-expanded', 'false');
            isDropdownOpen = false;
        }

        // Function to open dropdown
        function openDropdown() {
            navLinks.classList.add('active');
            dropdownToggle.classList.add('active');
            dropdownToggle.setAttribute('aria-expanded', 'true');
            isDropdownOpen = true;
        }

        // Toggle dropdown on button click
        dropdownToggle.addEventListener('click', (e) => {
            e.stopPropagation();
            if (isDropdownOpen) {
                closeDropdown();
            } else {
                openDropdown();
            }
        });

        // Close dropdown when clicking outside
        document.addEventListener('click', (e) => {
            if (isDropdownOpen && !e.target.closest('.nav')) {
                closeDropdown();
            }
        });

        // Close dropdown when pressing Escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && isDropdownOpen) {
                closeDropdown();
            }
        });

        // Handle window resize
        window.addEventListener('resize', () => {
            if (window.innerWidth > 768 && isDropdownOpen) {
                closeDropdown();
            }
        });

        // Add keyboard navigation within dropdown
        navLinks.addEventListener('keydown', (e) => {
            const items = [...navLinks.querySelectorAll('.nav-link')];
            const currentIndex = items.indexOf(document.activeElement);
            
            switch (e.key) {
                case 'ArrowDown':
                    e.preventDefault();
                    items[(currentIndex + 1) % items.length].focus();
                    break;
                case 'ArrowUp':
                    e.preventDefault();
                    items[currentIndex > 0 ? currentIndex - 1 : items.length - 1].focus();
                    break;
                case 'Home':
                    e.preventDefault();
                    items[0].focus();
                    break;
                case 'End':
                    e.preventDefault();
                    items[items.length - 1].focus();
                    break;
            }
        });

        // Dynamic text animation
        const texts = [
            "Exploring potential literature...",
            "Computing literary constraints...",
            "Generating stochastic verse...",
            "Remixing library of babel...",
            "Workshopping potential texts...",
            "Indexing files ab aeterno...",
            "Enumerating mirrors in improbable volumes...",
            "Culling algorithmic schemes...",
            "Remediating form and function...",
            "Loading metaphors, please wait...",
            "Calling texts from encrypted archives..."
        ];

        let textIndex = 0;
        let charIndex = 0;
        let isDeleting = false;
        const dynamicText = document.getElementById('dynamicText');

        function typeText() {
            const currentText = texts[textIndex];
            
            if (isDeleting) {
                dynamicText.textContent = currentText.substring(0, charIndex - 1);
                charIndex--;
            } else {
                dynamicText.textContent = currentText.substring(0, charIndex + 1);
                charIndex++;
            }

            if (!isDeleting && charIndex === currentText.length) {
                isDeleting = true;
                setTimeout(typeText, 2000);
                return;
            }

            if (isDeleting && charIndex === 0) {
                isDeleting = false;
                textIndex = (textIndex + 1) % texts.length;
            }

            const typingSpeed = isDeleting ? 50 : 100;
            setTimeout(typeText, typingSpeed);
        }

        document.addEventListener('DOMContentLoaded', () => {
            typeText();
            
            // Add fade-in animation to elements when they enter viewport
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('fade-in');
                    }
                });
            }, { threshold: 0.1 });

            document.querySelectorAll('.fade-in').forEach(el => observer.observe(el));
        });
    </script>
</body>
</html>